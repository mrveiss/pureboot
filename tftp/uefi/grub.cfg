# PureBoot GRUB Configuration
# This config fetches node-specific boot parameters from the PureBoot server

set default=0
set timeout=3

# Get the MAC address from the network interface
# GRUB exposes it via net_<interface>_mac
# We'll try to use it to fetch node-specific config

# Display boot info
echo "PureBoot GRUB Loader"
echo "===================="
echo ""

# Try to source node-specific config from server
# The server URL is configured during deployment
configfile (http,${pxe_default_server}:8080)/api/v1/grub?mac=${net_default_mac}

# Fallback if configfile fails
menuentry "Boot from local disk (fallback)" {
    exit
}
